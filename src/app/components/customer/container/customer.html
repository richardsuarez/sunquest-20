<div class="headers">
    <h1>Customers</h1>
    <button mat-button mat-raised-button (click)="addCustomer()" style="background-color: #ED2D89; color: white">
        Add Customer
    </button>
</div>
<div class="search">
    <mat-form-field appearance="outline" subscriptSizing="dynamic" [class.form-field]="!isMobile"
        [class.form-field-mobile]="isMobile">
        <input type="text" matInput [formControl]="searchCustomer"
            [placeholder]="!isMobile ? 'Search by first name, last name or telephone number' : 'Search customer'">
    </mat-form-field>
    <button mat-icon-button class="search-button" color="primary" [disabled]="searchCustomer.value?.length === 0"
        type="submit">
        <mat-icon>search</mat-icon>
    </button>
</div>
<div class="body">
    <!-- <mat-card *ngFor="let customer of customerState.customerList()" style="padding: 30px;"
        (click)="toEditCustomer(customer)">
        <mat-card-title style="display: block; margin-bottom: 20px;">
            <div style="font-weight: bold; font-size: 30px; margin-bottom: 10px">
                {{ customer.primaryTitle }} {{ customer.primaryFirstName }} <span *ngIf="customer.primaryMiddleName">({{
                    customer.primaryMiddleName }})</span> {{
                customer.primaryLastName }}
            </div>
            <div *ngIf="customer.secondaryFirstName || customer.secondaryLastName">
                <span>{{ customer.secondaryTitle }} {{ customer.secondaryFirstName }} <span
                        *ngIf="customer.secondaryMiddleName">({{ customer.secondaryMiddleName }})</span> {{
                    customer.secondaryLastName }}
                </span>
            </div>

        </mat-card-title>
        <mat-card-content>
            <div style="display: flex; flex-direction: column; margin-bottom: 20px">
                <span style="color: gray; margin-bottom: 10px">CONTACT INFORMATION</span>
                <span style="display: flex; align-items: center; margin-right: 10px; gap: 5px;">
                    <mat-icon>email</mat-icon>
                    <a style="color: black" [href]="formatLabelEmail(customer.email)"
                        (click)="$event.stopPropagation()">
                        {{ customer.email }}
                    </a>
                </span>
                <div *ngIf="!isMobile">
                    <span style="display: flex; align-items: center; margin-right: 10px; gap: 5px;">
                        <mat-icon>call</mat-icon>
                        <a style="color: black">{{ customer.phone }}</a>
                    </span>
                    <span *ngIf="customer.telephone"
                        style="display: flex; align-items: center; margin-right: 10px; gap: 5px">
                        <mat-icon>call</mat-icon>
                        <a style="color: black">{{ customer.telephone }}</a>
                    </span>
                </div>
                <div *ngIf="isMobile">
                    <span style="display: flex; align-items: center; margin-right: 10px">
                        <mat-icon>call</mat-icon>
                        <a style="color: black" [href]="formatLabelPhone(customer.phone)"
                            (click)="$event.stopPropagation()">
                            {{ customer.phone }}
                        </a>
                    </span>
                    <span *ngIf="customer.telephone" style="display: flex; align-items: center; margin-right: 10px">
                        <mat-icon>call</mat-icon>
                        <a style="color: black" [href]="formatLabelPhone(customer.telephone)"
                            (click)="$event.stopPropagation()">
                            {{ customer.telephone }}
                        </a>
                    </span>
                </div>

            </div>
            <div style="display: flex; flex-direction: column">
                <span style="color: gray; margin-bottom: 10px">ADDRESS INFORMATION</span>
                <div style="display: flex; gap: 5px">
                    <mat-icon>location_on</mat-icon>
                    <div style="display: flex; flex-direction: column">
                        <span>
                            {{ customer.address1 }}<span *ngIf="customer.address2">, {{ customer.address2 }}</span>
                        </span>
                        <span *ngIf="customer.bldg">Building: {{ customer.bldg }}</span>
                        <span *ngIf="customer.apt">Apartment: {{ customer.apt }}</span>
                        <span>{{ customer.city }}, {{ customer.state }}, {{ customer.zipCode }}</span>
                    </div>
                </div>

            </div>
        </mat-card-content>
    </mat-card> -->

    <mat-card *ngFor="let customer of customerState.customerList()" 
        [class.customer-card-desktop]="!isMobile" [class.customer-card-mobile]="isMobile">
        <mat-card-header>
            <div mat-card-avatar class="customer-avatar">
                <mat-icon>person</mat-icon>
            </div>
            <mat-card-title>{{ customer.primaryTitle }} {{ customer.primaryFirstName }} {{ customer.primaryLastName
                }}</mat-card-title>
            <mat-card-subtitle *ngIf="customer.secondaryFirstName">
                {{ customer.secondaryTitle }} {{ customer.secondaryFirstName }} {{ customer.secondaryLastName }}
            </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <section class="info-section">
                <h4>Contact Information</h4>
                <p>
                    <mat-icon>email</mat-icon>
                    <a [href]="'mailto:' + customer.email">{{ customer.email }}</a>
                </p>
                <p>
                    <mat-icon>phone</mat-icon>
                    <a [href]="'tel:' + customer.phone">{{ customer.phone }}</a>
                </p>
            </section>

            <mat-divider></mat-divider>

            <section class="info-section">
                <h4>Address</h4>
                <div style="display: flex; gap: 5px">
                    <mat-icon>location_on</mat-icon>
                    <div style="display: block">
                        <div>{{ customer.address1 }} {{ customer.address2 }}</div>
                        <div>{{ customer.city }}, {{ customer.state }} {{ customer.zipCode }}</div>
                    </div>
                </div>
            </section>
        </mat-card-content>

        <mat-card-actions>
            <button mat-button color="primary" (click)="toEditCustomer(customer)">Edit</button>
            <button mat-button color="warn" (click)="deleteCustomer(customer)">Delete</button>
        </mat-card-actions>
    </mat-card>

    <div *ngIf="customerState.customerList().length === 0" style="text-align: center; margin-top: 20px">
        <h2>No customers found.</h2>
    </div>
</div>